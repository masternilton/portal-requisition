import"../chunks/DsnmJJEf.js";import"../chunks/BV3hjmsP.js";import{w as ee,o as ve}from"../chunks/maGQv20_.js";import{aC as fe,aD as me,u as G,h as be,y as ge,a8 as V,aE as pe,p as ae,l as xe,k as ye,f as C,t as K,aF as O,b as g,c as te,j as a,s as f,d as c,m as p,n as k,r as d,e as T,aG as _e,v as U,a as X,i as he,w as we}from"../chunks/DvkHFTiD.js";import{i as H}from"../chunks/DqyTZu-Q.js";import{r as P}from"../chunks/CtKQbUfn.js";import{i as re}from"../chunks/hyV0Bv3U.js";import{p as oe}from"../chunks/CcHaSuRL.js";import{g as Y}from"../chunks/BAnWHYzw.js";import{i as ke}from"../chunks/BlYGXibV.js";import{e as Ce,i as Me}from"../chunks/kJaQhxva.js";import{s as Se}from"../chunks/6BEYVafy.js";import{a as Z,s as je}from"../chunks/CvIpSzuz.js";function Q(e,o,u=o){var m=new WeakSet;fe(e,"input",async n=>{var r=n?e.defaultValue:e.value;if(r=I(e)?J(r):r,u(r),V!==null&&m.add(V),await me(),r!==(r=o())){var i=e.selectionStart,x=e.selectionEnd,v=e.value.length;if(e.value=r??"",x!==null){var s=e.value.length;i===x&&x===v&&s>v?(e.selectionStart=s,e.selectionEnd=s):(e.selectionStart=i,e.selectionEnd=Math.min(x,s))}}}),(ge&&e.defaultValue!==e.value||G(o)==null&&e.value)&&(u(I(e)?J(e.value):e.value),V!==null&&m.add(V)),be(()=>{var n=o();if(e===document.activeElement){var r=pe??V;if(m.has(r))return}I(e)&&n===J(e.value)||e.type==="date"&&!n&&!e.value||n!==e.value&&(e.value=n??"")})}function I(e){var o=e.type;return o==="number"||o==="range"}function J(e){return e===""?null:+e}const se=ee([]),Be=ee(!1);var Ee=C('<div class="p-4 text-center text-gray-500">Cargando marcas...</div>'),qe=C('<div class="p-4 text-center text-gray-500">No hay resultados</div>'),Ae=C('<button type="button" class="w-full px-4 py-2 text-left hover:bg-gray-100 border-b border-gray-100 last:border-b-0"> </button>'),Ve=C('<div class="absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto"><input type="text" placeholder="Buscar marca..." class="w-full px-4 py-2 border-b border-gray-200 sticky top-0 bg-white"/> <!></div>'),ze=C('<div class="relative"><button type="button" class="w-full bg-gray-100 px-4 py-3 rounded-lg border border-gray-300 text-left flex justify-between items-center focus:outline-none focus:ring-2 focus:ring-black"><span class="text-gray-800"> </span> <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button> <!></div>');function De(e,o){ae(o,!1);const u=()=>Z(se,"$marcas",n),m=()=>Z(Be,"$loadingMarcas",n),[n,r]=je(),i=k();let x=oe(o,"onSelect",8,()=>{}),v=k(!1),s=k(""),y=k(null);console.log("Combobox: marcas =",u());function j(l){p(y,l),p(s,l.name),p(v,!1),x()(l)}function N(){p(v,!a(v)),a(v)&&p(s,a(y)?.name||"")}xe(()=>(u(),a(s)),()=>{p(i,u().filter(l=>l.name.toLowerCase().includes(a(s).toLowerCase())))}),ye(),re();var h=ze(),_=c(h),B=c(_),E=c(B,!0);d(B);var z=f(B,2);d(_);var q=f(_,2);{var D=l=>{var A=Ve(),M=c(A);P(M),_e(M);var R=f(M,2);{var t=b=>{var F=Ee();g(b,F)},w=b=>{var F=U(),le=X(F);{var ne=S=>{var L=qe();g(S,L)},ie=S=>{var L=U(),ce=X(L);Ce(ce,1,()=>a(i),Me,(de,W)=>{var $=Ae(),ue=c($,!0);d($),K(()=>T(ue,(a(W),G(()=>a(W).name)))),O("click",$,()=>j(a(W))),g(de,$)}),g(S,L)};H(le,S=>{a(i),G(()=>a(i).length===0)?S(ne):S(ie,!1)},!0)}g(b,F)};H(R,b=>{m()?b(t):b(w,!1)})}d(A),Q(M,()=>a(s),b=>p(s,b)),g(l,A)};H(q,l=>{a(v)&&l(D)})}d(h),K(()=>{T(E,(a(y),G(()=>a(y)?.name||"Selecciona una marca"))),Se(z,0,`w-5 h-5 transition-transform ${a(v)?"rotate-180":""}`)}),O("click",_,N),g(e,h),te(),r()}var Fe=C('<span class="flex items-center justify-center"><svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Agregando...</span>'),Le=C('<section class="p-6 max-w-4xl mx-auto"><h1 class="text-2xl font-bold text-gray-800 mb-6">Agregar un Ã­tem</h1> <div class="flex items-center justify-end mb-2"><button class="flex items-center bg-black text-white hover:bg-gray-800 transition-colors rounded-lg px-3 py-2 mb-4 active:scale-95"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5 mr-2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7"></path></svg> <span class="font-medium">Volver</span></button></div> <form class="w-full flex flex-col gap-5 bg-white shadow-sm rounded-xl p-6 border border-gray-200"><div><label class="block text-sm font-semibold text-gray-700 mb-1">Marca</label> <!></div> <div><label class="block text-sm font-semibold text-gray-700 mb-1">Cantidad</label> <input type="number" required min="1" placeholder="00" class="w-full bg-gray-100 px-4 py-3 rounded-lg border border-gray-300 text-gray-800 text-base focus:outline-none focus:ring-2 focus:ring-black"/></div> <div><label class="block text-sm font-semibold text-gray-700 mb-1">Capacidad (ml)</label> <input type="number" required min="50" step="50" placeholder="Ej. 750" class="w-full bg-gray-100 px-4 py-3 rounded-lg border border-gray-300 text-gray-800 text-base focus:outline-none focus:ring-2 focus:ring-black"/></div> <button type="submit" class="w-full bg-[#0B4F6C] text-white font-semibold py-3 rounded-lg text-lg active:scale-95 transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:active:scale-100"><!></button></form></section>');function Ue(e,o){ae(o,!1);let u=k(null),m=k(null),n=oe(o,"data",8),r=null,i=k(!1);ve(()=>{se.set(n().marcas),console.log("Marcas cargadas en cliente:",n().marcas)});function x(t){r=t,console.log("Seleccionado:",t)}function v(t){if(t.preventDefault(),a(i))return;if(!r||!a(u)||!a(m)){alert("Completa todos los campos");return}p(i,!0);const w={id:r?.id??"0",name:r?.name??"sin definir",cantidad:a(u)??0,capacidad:a(m)??0};ke.update(b=>[...b,w]),Y("/requisition/preview")}function s(){Y("/requisition/preview")}re();var y=Le(),j=f(c(y),2),N=c(j);N.__click=s,d(j);var h=f(j,2),_=c(h),B=f(c(_),2);De(B,{onSelect:x}),d(_);var E=f(_,2),z=f(c(E),2);P(z),d(E);var q=f(E,2),D=f(c(q),2);P(D),d(q);var l=f(q,2),A=c(l);{var M=t=>{var w=Fe();g(t,w)},R=t=>{var w=we("Agregar");g(t,w)};H(A,t=>{a(i)?t(M):t(R,!1)})}d(l),d(h),d(y),K(()=>l.disabled=a(i)),O("submit",h,v),Q(z,()=>a(u),t=>p(u,t)),Q(D,()=>a(m),t=>p(m,t)),g(e,y),te()}he(["click"]);export{Ue as component};
