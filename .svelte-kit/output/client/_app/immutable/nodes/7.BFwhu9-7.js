import"../chunks/DsnmJJEf.js";import"../chunks/BV3hjmsP.js";import{i as oe,p as ie,l as ne,k as le,f as h,a as D,d as t,t as y,b as d,c as ce,s as n,u as v,e as b,m as f,n as E,r as a,o as de,j as o,v as ve,w as F}from"../chunks/DvkHFTiD.js";import{i as _}from"../chunks/DqyTZu-Q.js";import{e as pe,i as me}from"../chunks/kJaQhxva.js";import{a as ue,e as fe}from"../chunks/XG95yxdz.js";import{r as ge,s as xe}from"../chunks/CtKQbUfn.js";import{s as be}from"../chunks/6BEYVafy.js";import{i as _e}from"../chunks/hyV0Bv3U.js";import{s as he,a as we}from"../chunks/CvIpSzuz.js";import{g as N}from"../chunks/BAnWHYzw.js";import{i as O}from"../chunks/BlYGXibV.js";import{S as ye}from"../chunks/B724axDh.js";var ke=h('<div class="grid px-4 py-2 border-b border-gray-100 hover:bg-gray-50 text-sm items-center" style="grid-template-columns: 70% 15% 15%;"><span class="truncate"> </span> <span class="text-center"> </span> <span class="text-center font-bold text-md"> </span></div>'),qe=h('<div class="border-2 border-dashed border-gray-300 rounded-xl p-12 m-4 text-center"><p class="text-gray-500 text-lg font-medium">Aún no hay ítems agregados en la requisición</p> <p class="text-gray-400 text-sm mt-2">Haz clic en "Agregar ítem" para comenzar</p></div>'),Se=h('<div class="w-full  mx-auto"><p> </p></div>'),Re=h('<div class="w-full  mx-auto"><form method="POST" action="?/create_requisition"><input type="hidden" name="requisition_items"/> <button type="submit" class="bg-[#0B4F6C] text-white font-semibold py-3 px-6 rounded-lg text-lg w-full active:scale-95 transition-transform disabled:opacity-50 disabled:cursor-not-allowed"><!></button></form></div>'),je=h('<section class="p-6 max-w-4xl mx-auto"><h1 class="text-2xl font-bold mb-4">Nueva Requisición</h1> <div class="flex items-center justify-end mb-2"><button class="flex items-center bg-black text-white hover:bg-gray-800 transition-colors rounded-lg px-3 py-2 mb-4 active:scale-95"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5 mr-2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7"></path></svg> <span class="font-medium">Volver</span></button></div> <div class="bg-white shadow-sm rounded-xl p-4 border border-gray-200 mb-6"><p><strong>Fecha:</strong> </p> <p><strong>Solicitante:</strong></p> <p><strong>Estado:</strong> Por completar</p></div> <div class="flex items-center justify-end mb-2"><button class="flex items-center bg-black font-semibold text-white hover:bg-gray-800 transition-colors rounded-lg px-3 py-2 mb-4 active:scale-95"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5 mr-2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7"></path></svg> <span>Agregar item</span></button></div> <div class="bg-white shadow-sm rounded-xl border border-gray-200 overflow-hidden"><div class="grid font-semibold text-gray-700 border-b border-gray-200 px-4 py-2 text-sm" style="grid-template-columns: 70% 15% 15%;"><span class="text-left">Productos solicitados</span> <span class="text-center">Capac.</span> <span class="text-center">Cant.</span></div> <!></div> <div class="mt-8 space-y-4"><!> <!></div></section> <!>',1);function He(T,H){ie(H,!1);const p=()=>we(O,"$itemsRequisition",J),[J,L]=he(),c=E();let w=E(!1),$=E(!1);function V(){N("/requisition/new")}function G(){N("/")}const I=()=>(f(w,!0),f(c,""),async({result:e,update:s})=>{e.type==="success"?(f($,!0),O.set([])):e.type==="failure"?f(c,e.data?.error||"Error desconocido"):e.type==="error"&&f(c,"Error de red"),f(w,!1),s()});ne(()=>{},()=>{f(c,"")}),le(),_e();var B=je(),k=D(B),q=n(t(k),2),K=t(q);K.__click=G,a(q);var S=n(q,2),A=t(S),Q=n(t(A));a(A),de(4),a(S);var R=n(S,2),U=t(R);U.__click=V,a(R);var j=n(R,2),W=n(t(j),2);{var X=e=>{var s=ve(),l=D(s);pe(l,1,p,me,(m,i)=>{var g=ke(),x=t(g),C=t(x,!0);a(x);var r=n(x,2),u=t(r,!0);a(r);var z=n(r,2),re=t(z,!0);a(z),a(g),y(()=>{b(C,(o(i),v(()=>o(i).name))),b(u,(o(i),v(()=>o(i).capacidad))),b(re,(o(i),v(()=>o(i).cantidad)))}),d(m,g)}),d(e,s)},Y=e=>{var s=qe();d(e,s)};_(W,e=>{p(),v(()=>p().length>0)?e(X):e(Y,!1)})}a(j);var M=n(j,2),P=t(M);{var Z=e=>{var s=Se(),l=t(s),m=t(l,!0);a(l),a(s),y(i=>{be(l,1,`text-center font-medium ${i??""}`),b(m,o(c))},[()=>(o(c),v(()=>o(c).includes("enviada")?"text-green-600":"text-red-600"))]),d(e,s)};_(P,e=>{o(c)&&e(Z)})}var ee=n(P,2);{var te=e=>{var s=Re(),l=t(s),m=t(l);ge(m);var i=n(m,2),g=t(i);{var x=r=>{var u=F("Enviando...");d(r,u)},C=r=>{var u=F("Enviar Requisición");d(r,u)};_(g,r=>{o(w)?r(x):r(C,!1)})}a(i),a(l),ue(l,(r,u)=>fe?.(r,u),()=>I),a(s),y(r=>{xe(m,r),i.disabled=o(w)},[()=>(p(),v(()=>JSON.stringify(p())))]),d(e,s)};_(ee,e=>{p(),v(()=>p().length>0)&&e(te)})}a(M),a(k);var ae=n(k,2);{var se=e=>{ye(e,{message:"¡Requisición creada!",redirectTo:"/"})};_(ae,e=>{o($)&&e(se)})}y(e=>b(Q,` ${e??""}`),[()=>v(()=>new Date().toLocaleDateString())]),d(T,B),ce(),L()}oe(["click"]);export{He as component};
